# todo: What should be the SOC here? What shuold we configure in bicep vs this yaml template
properties:
  template:
    containers:
    - image: ghcr.io/digdir/dialogporten-webapi:1.0.0
      name: webapi-so
      probes:
      - type: Liveness
        httpGet:
      
          path: "/health"
          port: 8080
          httpHeaders:
          - name: Custom-Header
            value: Awesome
        initialDelaySeconds: 3
        periodSeconds: 3
    initContainers:
    - image: repo/testcontainerApp0:v4
      name: testinitcontainerApp0
      resources:
        cpu: 0.2
        memory: 100Mi
      command:
      - "/bin/sh"
      args:
      - "-c"
      - while true; do echo hello; sleep 10;done
    scale:
      minReplicas: 1
      maxReplicas: 1 # temp disable scaling for outbox scheduling
      rules:
      - name: httpscalingrule
        custom:
          type: http
          metadata:
            concurrentRequests: '50'
            